<tool id="hutch_magpie" name="Export data to magpie" version="1.0.0">
  <description>for interactive analysis, visualization, and annotation with R and markdown</description>
  <version_command>echo "magpie 1.0.0"</version_command>
  <command interpreter="bash">
    cp -f ${config} ${output}
  </command>
  <inputs>
    <repeat name="exports" title="Datasets to export to magpie">
      <param name="input" type="data" label="Dataset"/>
      <param name="r_name" type="text" value="my.dataset" label="R variable name" help="From the R documentation for make.names, 'A syntactically valid name consists of letters, numbers and the dot or underline characters and starts with a letter or the dot not followed by a number.'"/>
    </repeat>
  </inputs>
  <outputs>
    <!-- TODO outputs only for non-interactive sessions -->
    <data format="txt" name="output"/>
  </outputs>
  <configfiles>
    <!-- TODO can this be CDATA? -->
    <configfile name="config">
      #for $i, $s in enumerate($exports)

      ## TODO Add comment with &quot;Dataset name&quot;,&quot;API_KEY&quot;,...
      ${s.r_name} &lt;- read.csv(&quot;${s.input.file_name}&quot;, as.is=TRUE)

      #end for
    </configfile>
  </configfiles>
  <help>

    .. class:: infomark

    **What it does**

    ``magpie`` is an interactive analysis and visualization
    application with R and markdown support using Shiny_.

    :: _Shiny: http://shiny.rstudio.com/

  </help>
</tool>
